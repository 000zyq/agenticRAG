## 2026-02-13

### Summary
- Focused on why MinerU still produced many `raw_*` metrics on `tmp/ingest/2024年报.pdf`.
- Confirmed issue is mixed: metric matching gaps + statement-type routing, not pure PDF numeric read failure.

### Findings
- Many high-frequency raw labels were semantically correct finance metrics (`租赁负债`, `投资收益（损失以...）`, `分配股利、利润或偿付利息支付的现金`) and should be matched.
- `data/financial_dictionary.json` had sparse coverage for these items.
- `metric_defs` merge logic ignored base aliases when same `metric_code` existed in dictionary, causing missed matches.
- Remaining raw tails are mainly indirect cashflow adjustment lines and a few payable/receivable detail rows.

### Changes
- Strengthened `normalize_label` to strip:
  - list prefixes (`一、`, `1.`)
  - `其中:` prefix
  - parenthetical fill-in annotations (`损失以...号填列` etc.)
- Added high-frequency metrics/aliases in `BASE_METRIC_DEFS`.
- Changed dictionary/base merge to union pattern buckets for same `metric_code`.
- Added CAS unmapped fallback to stable `cas2020_<sub_code>` metric ids.
- Added row-level statement fallback in ingestion and low-quality unmatched label filtering.

### Validation
- `pytest -m "not integration"`: `34 passed, 1 deselected`.
- Fast recompute with cached MinerU output (`MINERU_CMD=false`, `MINERU_OUTPUT_DIR=tmp/mineru_output`) succeeded.
- Raw ratios improved materially:
  - MinerU flow raw: `42.22% -> 12.77%`
  - MinerU stock raw: `17.11% -> 1.31%`

### Next
- Add explicit metrics for remaining indirect-cashflow adjustment rows (折旧/摊销/应收应付变动项) to further cut raw.
- Decide whether `应收股利/应付股利` should be first-class metrics in core dictionary.
